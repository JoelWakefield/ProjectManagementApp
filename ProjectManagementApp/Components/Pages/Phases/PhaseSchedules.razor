@page "/phases/schedules"
@using Microsoft.AspNetCore.Authorization
@using ProjectManagementApp.Components.Shared
@using ProjectManagementApp.Data
@using ProjectManagementApp.Services
@attribute [Authorize]
@inject IPhaseService PhaseService

<PageTitle>Phase Schedules</PageTitle>

<MudText Typo="Typo.h1" Class="px-6">Phase Schedules</MudText>

@if (Errors != null)
{
    <MudPaper Class="my-6 pa-8">
        <MudText Typo="Typo.caption" Class="px-6">@Errors</MudText>
    </MudPaper>
}

@foreach(var phase in Phases)
{
    <GanttRow Phase="phase" />
}

@code {

    private IEnumerable<Phase> Phases { get; set; } = new List<Phase>();
    private string? Errors { get; set; } = null;

    protected override void OnInitialized()
    {
        Phases = PhaseService.GetAllPhases();

    }
}
