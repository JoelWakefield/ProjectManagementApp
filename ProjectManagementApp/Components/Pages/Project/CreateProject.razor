@page "/projects/create"


<MudDatePicker Label="Basic example" @bind-Date="_date" />
<MudTimePicker Label="12 hours" AmPm="true" @bind-Time="_time" />

@code {
    private DateTime? _date = DateTime.Today;
    private TimeSpan? _time = new TimeSpan(00, 45, 00);
}


@* 
@rendermode InteractiveServer
@using Microsoft.AspNetCore.Authorization
@using Microsoft.EntityFrameworkCore
@using ProjectManagementApp.Components.Pages.Project.Shared
@using ProjectManagementApp.Data
@attribute [Authorize]
@inject ApplicationDbContext DbContext
@inject NavigationManager NavigationManager


<PageTitle>Create Project</PageTitle>

<MudText Typo="Typo.h1" Class="px-6">Create Project</MudText>

@if (Errors != null)
{
    <MudPaper Class="my-6 pa-8">
        <MudText Typo="Typo.caption" Class="px-6">@Errors</MudText>
    </MudPaper>
}

<MudPaper Class="pa-8">
    <ProjectDetailsForm Project="@Project" />
</MudPaper>


<MudButton Variant="Variant.Filled" Color="Color.Primary" Class="my-4" @onclick="Create">Create</MudButton>

@code {
    public Project? Project { get; set; }
    public string? Errors { get; set; } = null;

    public void Create() {
        try
        {
            DbContext.SaveChangesAsync();
            NavigationManager.NavigateTo($"/projects/details/{Project?.Id}", true);
        }
        catch (Exception ex)
        {
            Errors = ex.Message;
        }
    }
} *@